{"ast":null,"code":"import axios from \"axios\";\n\n// Localhost\n// const BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:3001\";\n\n// Cloud\nconst BASE_URL = \"https://breakingnews-backend-ows6.onrender.com\";\n\n/** API Class.\r\n *\r\n * Static class tying together methods used to get/send to to the API.\r\n * There shouldn't be any frontend-specific stuff here, and there shouldn't\r\n * be any API-aware stuff elsewhere in the frontend.\r\n *\r\n */\n\nclass NewsApi {\n  // the token for interactive with the API will be stored here.\n\n  static async request(endpoint) {\n    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"get\";\n    console.debug(\"API Call:\", endpoint, data, method);\n\n    //there are multiple ways to pass an authorization token, this is how you pass it in the header.\n    //this has been provided to show you another way to pass the token. you are only expected to read this code for this project.\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = {\n      Authorization: `Bearer ${NewsApi.token}`\n    };\n    const params = method === \"get\" ? data : {};\n    try {\n      return (await axios({\n        url,\n        method,\n        data,\n        params,\n        headers\n      })).data;\n    } catch (err) {\n      console.error(\"API Error:\", err.response);\n      let message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  }\n\n  // Individual API routes\n\n  /** Get the current user. */\n\n  static async getCurrentUser(username) {\n    let res = await this.request(`users/${username}`);\n    return res.user;\n  }\n\n  //User login\n  static async login(data) {\n    let res = await this.request(\"auth/token\", data, \"post\");\n    return res.token;\n  }\n  // Register new user\n  static async signup(data) {\n    let res = await this.request(\"auth/register\", data, \"post\");\n    return res.token;\n  }\n  //update the user profile\n  static async updateProfile(username, data) {\n    let res = await this.request(`users/${username}`, data, \"patch\");\n    return res.user;\n  }\n}\n\n// for now, put token (\"testuser\" / \"password\" on class)\nNewsApi.token = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZ\" + \"SI6InRlc3R1c2VyIiwiaXNBZG1pbiI6ZmFsc2UsImlhdCI6MTU5ODE1OTI1OX0.\" + \"FtrMwBQwe6Ue-glIFgz_Nf8XxRT2YecFCiSpYL0fCXc\";\nexport default NewsApi;","map":{"version":3,"names":["axios","BASE_URL","NewsApi","request","endpoint","data","arguments","length","undefined","method","console","debug","url","headers","Authorization","token","params","err","error","response","message","Array","isArray","getCurrentUser","username","res","user","login","signup","updateProfile"],"sources":["C:/NewsApp/frontend/src/api/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n// Localhost\r\n// const BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:3001\";\r\n\r\n// Cloud\r\nconst BASE_URL = \"https://breakingnews-backend-ows6.onrender.com\"\r\n\r\n/** API Class.\r\n *\r\n * Static class tying together methods used to get/send to to the API.\r\n * There shouldn't be any frontend-specific stuff here, and there shouldn't\r\n * be any API-aware stuff elsewhere in the frontend.\r\n *\r\n */\r\n\r\nclass NewsApi {\r\n  // the token for interactive with the API will be stored here.\r\n  static token;\r\n\r\n  static async request(endpoint, data = {}, method = \"get\") {\r\n    console.debug(\"API Call:\", endpoint, data, method);\r\n\r\n    //there are multiple ways to pass an authorization token, this is how you pass it in the header.\r\n    //this has been provided to show you another way to pass the token. you are only expected to read this code for this project.\r\n    const url = `${BASE_URL}/${endpoint}`;\r\n    const headers = { Authorization: `Bearer ${NewsApi.token}` };\r\n    const params = method === \"get\" ? data : {};\r\n\r\n    try {\r\n      return (await axios({ url, method, data, params, headers })).data;\r\n    } catch (err) {\r\n      console.error(\"API Error:\", err.response);\r\n      let message = err.response.data.error.message;\r\n      throw Array.isArray(message) ? message : [message];\r\n    }\r\n  }\r\n\r\n  // Individual API routes\r\n\r\n  /** Get the current user. */\r\n\r\n  static async getCurrentUser(username) {\r\n    let res = await this.request(`users/${username}`);\r\n    return res.user;\r\n  }\r\n\r\n  //User login\r\n  static async login(data) {\r\n    let res = await this.request(\"auth/token\", data, \"post\");\r\n    return res.token;\r\n  }\r\n  // Register new user\r\n  static async signup(data) {\r\n    let res = await this.request(\"auth/register\", data, \"post\");\r\n    return res.token;\r\n  }\r\n  //update the user profile\r\n  static async updateProfile(username, data) {\r\n    let res = await this.request(`users/${username}`, data, \"patch\");\r\n    return res.user;\r\n  }\r\n}\r\n\r\n// for now, put token (\"testuser\" / \"password\" on class)\r\nNewsApi.token =\r\n  \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZ\" +\r\n  \"SI6InRlc3R1c2VyIiwiaXNBZG1pbiI6ZmFsc2UsImlhdCI6MTU5ODE1OTI1OX0.\" +\r\n  \"FtrMwBQwe6Ue-glIFgz_Nf8XxRT2YecFCiSpYL0fCXc\";\r\n\r\nexport default NewsApi;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA;;AAEA;AACA,MAAMC,QAAQ,GAAG,gDAAgD;;AAEjE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,OAAO,CAAC;EACZ;;EAGA,aAAaC,OAAOA,CAACC,QAAQ,EAA6B;IAAA,IAA3BC,IAAI,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;IAAA,IAAEG,MAAM,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;IACtDI,OAAO,CAACC,KAAK,CAAC,WAAW,EAAEP,QAAQ,EAAEC,IAAI,EAAEI,MAAM,CAAC;;IAElD;IACA;IACA,MAAMG,GAAG,GAAI,GAAEX,QAAS,IAAGG,QAAS,EAAC;IACrC,MAAMS,OAAO,GAAG;MAAEC,aAAa,EAAG,UAASZ,OAAO,CAACa,KAAM;IAAE,CAAC;IAC5D,MAAMC,MAAM,GAAGP,MAAM,KAAK,KAAK,GAAGJ,IAAI,GAAG,CAAC,CAAC;IAE3C,IAAI;MACF,OAAO,CAAC,MAAML,KAAK,CAAC;QAAEY,GAAG;QAAEH,MAAM;QAAEJ,IAAI;QAAEW,MAAM;QAAEH;MAAQ,CAAC,CAAC,EAAER,IAAI;IACnE,CAAC,CAAC,OAAOY,GAAG,EAAE;MACZP,OAAO,CAACQ,KAAK,CAAC,YAAY,EAAED,GAAG,CAACE,QAAQ,CAAC;MACzC,IAAIC,OAAO,GAAGH,GAAG,CAACE,QAAQ,CAACd,IAAI,CAACa,KAAK,CAACE,OAAO;MAC7C,MAAMC,KAAK,CAACC,OAAO,CAACF,OAAO,CAAC,GAAGA,OAAO,GAAG,CAACA,OAAO,CAAC;IACpD;EACF;;EAEA;;EAEA;;EAEA,aAAaG,cAAcA,CAACC,QAAQ,EAAE;IACpC,IAAIC,GAAG,GAAG,MAAM,IAAI,CAACtB,OAAO,CAAE,SAAQqB,QAAS,EAAC,CAAC;IACjD,OAAOC,GAAG,CAACC,IAAI;EACjB;;EAEA;EACA,aAAaC,KAAKA,CAACtB,IAAI,EAAE;IACvB,IAAIoB,GAAG,GAAG,MAAM,IAAI,CAACtB,OAAO,CAAC,YAAY,EAAEE,IAAI,EAAE,MAAM,CAAC;IACxD,OAAOoB,GAAG,CAACV,KAAK;EAClB;EACA;EACA,aAAaa,MAAMA,CAACvB,IAAI,EAAE;IACxB,IAAIoB,GAAG,GAAG,MAAM,IAAI,CAACtB,OAAO,CAAC,eAAe,EAAEE,IAAI,EAAE,MAAM,CAAC;IAC3D,OAAOoB,GAAG,CAACV,KAAK;EAClB;EACA;EACA,aAAac,aAAaA,CAACL,QAAQ,EAAEnB,IAAI,EAAE;IACzC,IAAIoB,GAAG,GAAG,MAAM,IAAI,CAACtB,OAAO,CAAE,SAAQqB,QAAS,EAAC,EAAEnB,IAAI,EAAE,OAAO,CAAC;IAChE,OAAOoB,GAAG,CAACC,IAAI;EACjB;AACF;;AAEA;AACAxB,OAAO,CAACa,KAAK,GACX,oDAAoD,GACpD,iEAAiE,GACjE,6CAA6C;AAE/C,eAAeb,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}