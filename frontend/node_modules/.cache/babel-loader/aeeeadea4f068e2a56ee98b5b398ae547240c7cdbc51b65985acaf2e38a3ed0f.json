{"ast":null,"code":"import _regeneratorRuntime from\"C:/Springboard/Springboard/Springboard/Exercises/React/React-Jobly/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _defineProperty from\"C:/Springboard/Springboard/Springboard/Exercises/React/React-Jobly/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Springboard/Springboard/Springboard/Exercises/React/React-Jobly/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Springboard/Springboard/Springboard/Exercises/React/React-Jobly/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Springboard/Springboard/Springboard/Exercises/React/React-Jobly/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import UserContext from\"../auth/UserContext\";import JoblyApi from\"../api/api\";import Alert from\"../support/Alert\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProfileForm(){var _useContext=useContext(UserContext),currentUser=_useContext.currentUser,setCurrentUser=_useContext.setCurrentUser;var _useState=useState({username:currentUser.username,firstName:currentUser.firstName,lastName:currentUser.lastName,email:currentUser.email,password:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),formErrors=_useState4[0],setFormErrors=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),saveConfirmed=_useState6[0],setSaveConfirmed=_useState6[1];console.debug(\"ProfileForm\",\"currentUser=\",currentUser,\"formData=\",formData,\"formErrors=\",formErrors,\"saveConfirmed=\",saveConfirmed);function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(evt){var updatedUser,profileData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:evt.preventDefault();profileData={firstName:formData.firstName,lastName:formData.lastName,email:formData.email,password:formData.password};_context.prev=2;_context.next=5;return JoblyApi.updateProfile(formData.username,profileData);case 5:updatedUser=_context.sent;_context.next=13;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](2);debugger;setFormErrors(_context.t0);return _context.abrupt(\"return\");case 13:// when we update current user the form will show new information of user not the old one anymore\n// and the password will be emty string, and the user need to fill out password to confirm the change.\nsetFormData(function(formData){return _objectSpread(_objectSpread({},formData),{},{password:\"\"});});//  set up the new information for user.\nsetCurrentUser(updatedUser);setFormErrors([]);setSaveConfirmed(true);case 17:case\"end\":return _context.stop();}},_callee,null,[[2,8]]);}));return _handleSubmit.apply(this,arguments);}function handleChange(evt){var _evt$target=evt.target,value=_evt$target.value,name=_evt$target.name;setFormData(function(f){return _objectSpread(_objectSpread({},f),{},_defineProperty({},name,value));});setFormErrors([]);}return/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 col-lg-4 offset-md-3 offset-lg-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Profile\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Username\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"form-control-plaintext\",children:formData.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"FirstName\"}),/*#__PURE__*/_jsx(\"input\",{name:\"firstName\",className:\"form-control\",onChange:handleChange,value:formData.firstName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"LastName\"}),/*#__PURE__*/_jsx(\"input\",{name:\"lastName\",className:\"form-control\",onChange:handleChange,value:formData.lastName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",className:\"form-control\",onChange:handleChange,value:formData.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Confirm your password to update your change\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"form-control\",onChange:handleChange,value:formData.password})]}),formErrors.length?/*#__PURE__*/_jsx(Alert,{type:\"danger\",messages:formErrors}):null,saveConfirmed?/*#__PURE__*/_jsx(Alert,{type:\"success\",messages:[\"Updated successfully.\"]}):null,/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-block mt-4\",onSubmit:handleSubmit,children:\"Submit\"})]})})})]});}export default ProfileForm;","map":{"version":3,"names":["React","useState","useContext","UserContext","JoblyApi","Alert","jsx","_jsx","jsxs","_jsxs","ProfileForm","_useContext","currentUser","setCurrentUser","_useState","username","firstName","lastName","email","password","_useState2","_slicedToArray","formData","setFormData","_useState3","_useState4","formErrors","setFormErrors","_useState5","_useState6","saveConfirmed","setSaveConfirmed","console","debug","handleSubmit","_x","_handleSubmit","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","evt","updatedUser","profileData","wrap","_callee$","_context","prev","next","preventDefault","updateProfile","sent","t0","abrupt","_objectSpread","stop","handleChange","_evt$target","target","value","name","f","_defineProperty","className","children","onSubmit","onChange","type","length","messages"],"sources":["C:/Springboard/Springboard/Springboard/Exercises/React/React-Jobly/frontend/src/profile/ProfileForm.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport UserContext from \"../auth/UserContext\";\r\nimport JoblyApi from \"../api/api\";\r\nimport Alert from \"../support/Alert\";\r\nfunction ProfileForm() {\r\n  const { currentUser, setCurrentUser } = useContext(UserContext);\r\n  const [formData, setFormData] = useState({\r\n    username: currentUser.username,\r\n    firstName: currentUser.firstName,\r\n    lastName: currentUser.lastName,\r\n    email: currentUser.email,\r\n    password: \"\",\r\n  });\r\n  const [formErrors, setFormErrors] = useState([]);\r\n  const [saveConfirmed, setSaveConfirmed] = useState(false);\r\n  \r\n  console.debug(\r\n    \"ProfileForm\",\r\n    \"currentUser=\",\r\n    currentUser,\r\n    \"formData=\",\r\n    formData,\r\n    \"formErrors=\",\r\n    formErrors,\r\n    \"saveConfirmed=\",\r\n    saveConfirmed\r\n  );\r\n  async function handleSubmit(evt){\r\n    evt.preventDefault();\r\n    let updatedUser;\r\n    let profileData = {\r\n       firstName: formData.firstName,\r\n       lastName: formData.lastName,\r\n       email: formData.email,\r\n       password: formData.password,\r\n     };\r\n\r\n    \r\n    try {\r\n      updatedUser = await JoblyApi.updateProfile(formData.username, profileData);\r\n    } catch (errors) {\r\n      debugger;\r\n      setFormErrors(errors);\r\n      return;\r\n    }\r\n    // when we update current user the form will show new information of user not the old one anymore\r\n    // and the password will be emty string, and the user need to fill out password to confirm the change.\r\n    setFormData(formData => ({...formData, password : \"\"}))\r\n    //  set up the new information for user.\r\n    setCurrentUser(updatedUser)\r\n    setFormErrors([]);\r\n    setSaveConfirmed(true);\r\n  }\r\n   function handleChange(evt){\r\n    const {value, name} = evt.target;\r\n    setFormData(f => ({...f, [name]: value}))\r\n    setFormErrors([]);\r\n  \r\n   }\r\n\r\n   return (\r\n     <div className=\"col-md-6 col-lg-4 offset-md-3 offset-lg-4\">\r\n       <h2>Profile</h2>\r\n       <div className=\"card\">\r\n         <div className=\"card-body\">\r\n           <form onSubmit={handleSubmit}>\r\n             <div className=\"form-group\">\r\n               <label><b>Username</b></label>\r\n               <p className=\"form-control-plaintext\">{formData.username}</p>\r\n             </div>\r\n             <div className=\"form-group\">\r\n               <label>FirstName</label>\r\n               <input\r\n                 name=\"firstName\"\r\n                 className=\"form-control\"\r\n                 onChange={handleChange}\r\n                 value={formData.firstName}\r\n               />\r\n             </div>\r\n             <div className=\"form-group\">\r\n               <label>LastName</label>\r\n               <input\r\n                 name=\"lastName\"\r\n                 className=\"form-control\"\r\n                 onChange={handleChange}\r\n                 value={formData.lastName}\r\n               />\r\n             </div>\r\n             <div className=\"form-group\">\r\n               <label>Email</label>\r\n               <input\r\n                 name=\"email\"\r\n                 className=\"form-control\"\r\n                 onChange={handleChange}\r\n                 value={formData.email}\r\n               />\r\n             </div>\r\n             <div className=\"form-group\">\r\n               <h3>Confirm your password to update your change</h3>\r\n\r\n               <label>Password</label>\r\n               <input\r\n                 type=\"password\"\r\n                 name=\"password\"\r\n                 className=\"form-control\"\r\n                 onChange={handleChange}\r\n                 value={formData.password}\r\n               />\r\n             </div>\r\n\r\n             {formErrors.length ? (\r\n               <Alert type=\"danger\" messages={formErrors} />\r\n             ) : null}\r\n\r\n             {saveConfirmed ? (\r\n               <Alert type=\"success\" messages={[\"Updated successfully.\"]} />\r\n             ) : null}\r\n\r\n             <button\r\n               className=\"btn btn-primary btn-block mt-4\"\r\n               onSubmit={handleSubmit}\r\n             >\r\n               Submit\r\n             </button>\r\n           </form>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   );\r\n\r\n}\r\nexport default ProfileForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}